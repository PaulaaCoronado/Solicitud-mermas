// URL del archivo CSV en tu repositorio de GitHub
const csvUrl = 'https://raw.githubusercontent.com/TuUsuario/TuRepositorio/main/clientes.csv';

// Funci칩n para cargar el archivo CSV y procesar los datos
async function cargarDatos() {
    try {
        const response = await fetch(csvUrl);
        const data = await response.text();

        // Parsear los datos CSV
        const filas = data.split('\n');
        const clientes = {};

        // Iterar sobre las filas y extraer la informaci칩n necesaria
        for (let i = 1; i < filas.length; i++) { // Empezamos en 1 para saltar la fila de encabezado
            const fila = filas[i].split(',');
            const rut = fila[0];
            const empresa = fila[1];

            // Agregar la empresa al objeto clientes asociada al rut
            if (!clientes[rut]) {
                clientes[rut] = [];
            }
            clientes[rut].push(empresa);
        }

        // Actualizar la lista desplegable cuando se ingresa el Rut
        const rutInput = document.getElementById('rut');
        const empresaSelect = document.getElementById('empresa');

        rutInput.addEventListener('input', () => {
            const rut = rutInput.value;
            const empresas = clientes[rut] || [];

            // Limpiar y volver a llenar la lista desplegable de empresas
            empresaSelect.innerHTML = '';
            empresas.forEach(empresa => {
                const option = document.createElement('option');
                option.text = empresa;
                empresaSelect.add(option);
            });
        });

    } catch (error) {
        console.error('Error al cargar el archivo CSV:', error);
    }
}

// Llamar a la funci칩n para cargar los datos cuando la p치gina se carga
document.addEventListener('DOMContentLoaded', cargarDatos);
